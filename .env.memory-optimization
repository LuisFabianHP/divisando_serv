# ========================================
# Configuración de optimización de memoria
# ========================================
# Estas variables controlan el uso de memoria en Railway
# Ajustar según el plan (gratuito/limitado vs mejorado)

# --- Rate Limiter Store ---
# Máximo de entradas en memoria para rate limiting
# Plan gratuito: 5000 | Plan Pro: 10000+
RATE_LIMIT_STORE_MAX_ENTRIES=5000

# --- MongoDB Connection Pool ---
# Máximo de conexiones simultáneas a MongoDB
# Plan gratuito: 10 | Plan Pro: 50
MONGO_MAX_POOL_SIZE=10

# Mínimo de conexiones activas (siempre listas)
# Plan gratuito: 2 | Plan Pro: 5
MONGO_MIN_POOL_SIZE=2

# Tiempo máximo de inactividad antes de cerrar conexión (ms)
# Plan gratuito: 60000 (1min) | Plan Pro: 300000 (5min)
MONGO_MAX_IDLE_MS=60000

# --- Memory Monitor ---
# Frecuencia de monitoreo de memoria (cron format)
# Plan gratuito: */5 * * * * (cada 5min) | Plan Pro: */1 * * * * (cada 1min)
MEMORY_MONITOR_CRON=*/5 * * * *

# --- Garbage Collector ---
# Frecuencia de garbage collection forzado (cron format)
# Plan gratuito: */30 * * * * (cada 30min) | Plan Pro: */15 * * * * (cada 15min)
# NOTA: Requiere flag --expose-gc en Railway
GC_CRON=*/30 * * * *

# ========================================
# Instrucciones de escalamiento
# ========================================
# 
# Para escalar a un plan mejorado:
# 1. Aumentar recursos en Railway (RAM, CPU)
# 2. Ajustar variables arriba según plan Pro
# 3. Agregar flag --expose-gc en Railway start command:
#    node --expose-gc server.js
# 4. Considerar Redis para rate limiting en alta escala
# 
# ========================================
